"use strict";Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),"NodeList"in window&&!NodeList.prototype.forEach&&(console.info("polyfill for IE11"),NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),Element.prototype.remove||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),window.onload=function(){var i,o=screen.width;1200<=o&&(i=document.documentElement.clientHeight,document.querySelectorAll(".site-section").forEach(function(e,t){var n=Math.round(e.offsetHeight);if(console.log(n,e.id),n<=i&&"contact"!==e.id){var o=i-n;e.style.paddingTop="".concat(o/2,"px"),e.style.paddingBottom="".concat(o/2,"px")}})),900<=o&&document.querySelector(".pop-up-container").classList.add("pop-up-hidden"),window.addEventListener("resize",function(){1200<=(o=screen.width)&&h(v(d))});var e=document.querySelector(".burger-menu"),n=document.querySelector(".main-menu"),r=document.querySelectorAll(".menu-link"),l=null,s=null;document.addEventListener("click",function(e){var t=e.target;t.closest(".burger-menu")?g():null!==t.closest(".main-menu")||n.classList.contains("menu-hide")?(t.classList.contains("menu-link")&&setTimeout(g,500),t.closest(".pop-up-toggle")&&document.querySelector(".pop-up-container").classList.toggle("pop-up-hidden")):g()}),document.forms.feedback.addEventListener("click",function(){"checkbox"===event.target.type&&event.target.parentElement.classList.toggle("checked")});var a=null;y(document.querySelectorAll(".tab")[0]),document.addEventListener("mouseover",function(e){if(!(o<=1200)){var t=event.target;if(t.closest(".tab")){var n=t;if(n.classList.contains("tab"))y(n);else{for(;!n.classList.contains("tab");)n=n.parentElement;y(n)}}}});var c=document.querySelectorAll(".panel-link"),d=document.querySelectorAll(".site-section"),u=null,m=null;h(v(d));var p=!1,f=document.querySelector(".home-section").offsetHeight;Math.round(document.querySelector(".feedback-section").getBoundingClientRect().top);function h(e){if(!(o<1200)){var t=document.documentElement.clientHeight,n=document.documentElement.scrollTop+t/2;e.forEach(function(e,t){if(n>=e.top&&n<=e.bottom){if(u=c[t],l=r[t],null!==m&&m!==u&&(m.classList.remove("link-active"),s.classList.remove("link-active")),u.classList.contains("link-active"))return;u.classList.add("link-active"),l.classList.add("link-active"),m=u,s=l}})}}function y(e){if(!(o<1200)){null!==a&&a!==e&&a.classList.remove("tab-active"),a=e;var t=document.querySelector(".home-tabs").getBoundingClientRect().left,n=a.getBoundingClientRect().left;document.querySelector(".tabs-toggle").style.left="".concat(n-t,"px"),a.classList.add("tab-active")}}function g(){e.classList.toggle("js-active"),n.classList.toggle("menu-hide")}function v(e){var n=[],o=document.documentElement.scrollTop;return e.forEach(function(e){var t=e.getBoundingClientRect();n.push({id:e.id,top:t.top+o,right:t.right+o,bottom:t.bottom+o,left:t.left+o})}),n}document.addEventListener("scroll",function(e){var t=document.documentElement.scrollTop,n=Math.round(document.querySelector(".feedback-section").getBoundingClientRect().top);if(!p&&f-10<=t){var o=document.createElement("a");o.href="#hire-us",o.innerHTML="Hire us",o.classList.add("btn-fixed"),document.body.appendChild(o),p=!0}if(p&&n<=screen.height/2&&(document.querySelector(".btn-fixed").remove(),p=!1),p&&t+10<=f&&(document.querySelector(".btn-fixed").remove(),p=!1),h(v(d)),900<=screen.width){var i=document.querySelector(".pop-up-container"),r=document.getElementById("map").getBoundingClientRect().top;r<=50&&i.classList.contains("pop-up-hidden")&&i.classList.remove("pop-up-hidden"),r<0&&!i.classList.contains("pop-up-hidden")&&i.classList.add("pop-up-hidden")}})},window.initMap=function(){var e={lat:49.82087,lng:23.985022},t=new google.maps.Map(document.getElementById("map"),{center:e,zoom:12,disableDefaultUI:!0,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#707070"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#424242"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:17},{color:"#484848"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:29},{weight:.2},{color:"#ff0000"},{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]}),o='<div class="pin"></div>\n              <div class="pin-effect"></div>';i.prototype=new google.maps.OverlayView;var n=new google.maps.LatLngBounds(new google.maps.LatLng(e));function i(e,t,n,o){this.map_=e,this.html_=n,this.coordinates_=t,this.bounds_=o,this.div_=null,this.setMap(e)}new i(t,e,o,n),i.prototype.onAdd=function(){var e=document.createElement("div");e.classList.add("marker"),e.innerHTML=o,this.div_=e;var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var n=document.createElement("div");n.classList.add("map-overlay"),t.overlayShadow.appendChild(n)},i.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.bounds_.getSouthWest()),n=e.fromLatLngToDivPixel(this.bounds_.getNorthEast()),o=this.div_;o.style.left=t.x+"px",o.style.top=n.y+"px"},t.addListener("zoom_changed",function(){var e=this.getZoom();e<=16&&"hybrid"===this.getMapTypeId()&&this.setMapTypeId("roadmap"),16<=e&&this.setMapTypeId("hybrid")})};!function(e,t){var n=document.querySelector(e),r=n.querySelector(".slider-wrapper"),l=n.querySelectorAll(".slider-item"),s=(n.querySelectorAll(".slider-control"),n.querySelector(".slider-control-left"),n.querySelector(".slider-control-right"),parseFloat(getComputedStyle(r).width)),a=parseFloat(getComputedStyle(l[0]).width),c=0,d=0,u=a/s*100,m=[],p=0,f=n.innerHTML,h=[{active:!1,minWidth:0,count:1},{active:!1,minWidth:980,count:2}],o={isCycling:!1,direction:"right",interval:3e3,pause:!0},y=Math.round(s/a),i=null;for(var g in t)g in o&&(o[g]=t[g]);var v=0;function L(){var o=0,i=parseFloat(document.body.clientWidth);h.forEach(function(e,t,n){h[t].active=!1,i>=h[t].minWidth&&(o=t)}),h[o].active=!0}function E(e){var t;!function(e){function t(e,t){return document.elementFromPoint(e,t)}var n=e.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return!(n.right<0||n.bottom<0||n.left>o||n.top>i)&&(e.contains(t(n.left,n.top))||e.contains(t(n.right,n.top))||e.contains(t(n.right,n.bottom))||e.contains(t(n.left,n.bottom)))}(n)||("right"===e&&(++c+s/a-1>=w.getMax()&&(t=w.getItemMin(),m[t].position=w.getMax()+1,m[t].transform+=100*m.length,m[t].item.style.transform="translateX(".concat(m[t].transform,"%)")),i===m.length-1?(m[i].item.classList.remove("item-scale"),m[i=0].item.classList.add("item-scale")):(m[i].item.classList.remove("item-scale"),m[++i].item.classList.add("item-scale")),d-=u),"left"===e&&(--c<=w.getMin()&&(t=w.getItemMax(),m[t].position=w.getMin()-1,m[t].transform-=100*m.length,m[t].item.style.transform="translateX(".concat(m[t].transform,"%)")),0===i?(m[i].item.classList.remove("item-scale"),i=m.length-1,m[i].item.classList.add("item-scale")):(m[i].item.classList.remove("item-scale"),m[--i].item.classList.add("item-scale")),d+=u),r.style.transform="translateX("+d+"%)")}function b(e){o.isCycling&&(p=setInterval(function(){E(e)},o.interval))}function T(e){if(e.target.classList.contains("slider-control")){e.preventDefault();var t=e.target.classList.contains("slider-control-right")?"right":"left";E(t),clearInterval(p),b(o.direction)}}function S(){"hidden"===document.visibilityState?clearInterval(p):(clearInterval(p),b(o.direction))}l.forEach(function(e,t){m.push({item:e,position:t,transform:0})}),3===y?m[i=1].item.classList.add("item-scale"):m[i=0].item.classList.add("item-scale");var w={getItemMin:function(){var n=0;return m.forEach(function(e,t){e.position<m[n].position&&(n=t)}),n},getItemMax:function(){var n=0;return m.forEach(function(e,t){e.position>m[n].position&&(n=t)}),n},getMin:function(){return m[w.getItemMin()].position},getMax:function(){return m[w.getItemMax()].position}};n.addEventListener("click",T),o.pause&&o.isCycling&&(n.addEventListener("mouseenter",function(){clearInterval(p)}),n.addEventListener("mouseleave",function(){clearInterval(p),b(o.direction)})),document.addEventListener("visibilitychange",S,!1),window.addEventListener("resize",function(){var o=0,i=parseFloat(document.body.clientWidth);h.forEach(function(e,t,n){i>=h[t].minWidth&&(o=t)}),o!==function(){var o;return h.forEach(function(e,t,n){h[t].active&&(o=t)}),o}()&&(L(),clearInterval(p),n.innerHTML=f,r=n.querySelector(".slider-wrapper"),l=n.querySelectorAll(".slider-item"),n.querySelectorAll(".slider-control"),n.querySelector(".slider-control-left"),n.querySelector(".slider-control-right"),s=parseFloat(getComputedStyle(r).width),a=parseFloat(getComputedStyle(l[0]).width),d=c=0,u=a/s*100,m=[],y=Math.round(s/a),l.forEach(function(e,t){m.push({item:e,position:t,transform:0})}))}),n.addEventListener("touchstart",function(e){v=e.changedTouches[0].clientX}),n.addEventListener("touchend",function(e){var t=e.changedTouches[0].clientX-v;50<t?E("left"):t<-50&&E("right")}),"visible"===document.visibilityState&&b(o.direction),L()}(".slider",{});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGlvbi5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJFbGVtZW50IiwicHJvdG90eXBlIiwiY2xvc2VzdCIsImNzcyIsIm5vZGUiLCJ0aGlzIiwibWF0Y2hlcyIsInBhcmVudEVsZW1lbnQiLCJtYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIndpbmRvdyIsIk5vZGVMaXN0IiwiZm9yRWFjaCIsImNvbnNvbGUiLCJpbmZvIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwiaSIsImxlbmd0aCIsImNhbGwiLCJyZW1vdmUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJvbmxvYWQiLCJ2aWV3SGVpZ2h0Iiwid2luZG93V2lkdGgiLCJzY3JlZW4iLCJ3aWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwicXVlcnlTZWxlY3RvckFsbCIsInNlY3Rpb24iLCJpbmRleCIsInNlY3Rpb25IZWlnaHQiLCJNYXRoIiwicm91bmQiLCJvZmZzZXRIZWlnaHQiLCJsb2ciLCJpZCIsImRpZmYiLCJzdHlsZSIsInBhZGRpbmdUb3AiLCJjb25jYXQiLCJwYWRkaW5nQm90dG9tIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaWdodExpZ2h0IiwiZ2V0Q29vcmRzT25QYWdlIiwic2VjdGlvbnMiLCJtZW51VG9nZ2xlIiwibWVudSIsIm1lbnVMaW5rcyIsImN1cnJlbnRNZW51TGluayIsInByZXZNZW51TGluayIsImUiLCJ0YXJnZXQiLCJzaG93SGlkZU1lbnUiLCJjb250YWlucyIsInNldFRpbWVvdXQiLCJ0b2dnbGUiLCJmb3JtcyIsImZlZWRiYWNrIiwiZXZlbnQiLCJ0eXBlIiwiY3VycmVudFRhYiIsIm1hcmtUYWIiLCJ0YWIiLCJwYW5lbEl0ZW1zIiwiY3VycmVudFBhbmVsSXRlbSIsInByZXZQYW5lbEl0ZW0iLCJidG5GaXhlZCIsImhvbWVIZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJjb29yZHMiLCJ3aW5kb3dIZWlnaHQiLCJjaGFuZ2luZ0JvcmRlciIsInNjcm9sbFRvcCIsImJvdHRvbSIsInRhYlBhcmVudEJsb2NrTGVmdENvb3JkIiwibGVmdCIsImN1cnJlbnRUYWJMZWZ0Q29vcmQiLCJlbGVtZW50cyIsImFyciIsImN1cnJlbnRTY3JvbGwiLCJjIiwicHVzaCIsInJpZ2h0IiwiZmVlZGJhY2tUb3AiLCJhIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJpbm5lckhUTUwiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJoZWlnaHQiLCJwb3BVcCIsIm1hcFRvcCIsImdldEVsZW1lbnRCeUlkIiwiaW5pdE1hcCIsImxhdCIsImxuZyIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiZGlzYWJsZURlZmF1bHRVSSIsInN0eWxlcyIsImZlYXR1cmVUeXBlIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwic2F0dXJhdGlvbiIsImNvbG9yIiwibGlnaHRuZXNzIiwidmlzaWJpbGl0eSIsIndlaWdodCIsImh0bWwiLCJNeU92ZXJsYXkiLCJPdmVybGF5VmlldyIsImJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsIkxhdExuZyIsImNvb3JkaW5hdGVzIiwibWFwXyIsImh0bWxfIiwiY29vcmRpbmF0ZXNfIiwiYm91bmRzXyIsImRpdl8iLCJzZXRNYXAiLCJvbkFkZCIsImRpdiIsInBhbmVzIiwiZ2V0UGFuZXMiLCJvdmVybGF5TW91c2VUYXJnZXQiLCJtYXBPdmVybGF5Iiwib3ZlcmxheVNoYWRvdyIsImRyYXciLCJwcm9qZWN0aW9uIiwiZ2V0UHJvamVjdGlvbiIsInN3IiwiZnJvbUxhdExuZ1RvRGl2UGl4ZWwiLCJnZXRTb3V0aFdlc3QiLCJuZSIsImdldE5vcnRoRWFzdCIsIngiLCJ5IiwiYWRkTGlzdGVuZXIiLCJnZXRab29tIiwiZ2V0TWFwVHlwZUlkIiwic2V0TWFwVHlwZUlkIiwic2VsZWN0b3IiLCJjb25maWciLCJtYWluRWxlbWVudCIsInNsaWRlcldyYXBwZXIiLCJzbGlkZXJJdGVtcyIsIndyYXBwZXJXaWR0aCIsInBhcnNlRmxvYXQiLCJnZXRDb21wdXRlZFN0eWxlIiwiaXRlbVdpZHRoIiwicG9zaXRpb25MZWZ0SXRlbSIsInRyYW5zZm9ybSIsInN0ZXAiLCJpdGVtcyIsImludGVydmFsIiwic3RhdGVzIiwiYWN0aXZlIiwibWluV2lkdGgiLCJjb3VudCIsIl9jb25maWciLCJpc0N5Y2xpbmciLCJkaXJlY3Rpb24iLCJwYXVzZSIsInZpc2libGVJdGVtcyIsImluZGV4U2NhbGVkSXRlbSIsImtleSIsInN0YXJ0WCIsInNldEFjdGl2ZSIsIl9pbmRleCIsImNsaWVudFdpZHRoIiwiaXRlbSIsInRyYW5zZm9ybUl0ZW0iLCJuZXh0SXRlbSIsImVsZW1lbnQiLCJlbGVtRnJvbVBvaW50IiwiZWxlbWVudEZyb21Qb2ludCIsInJlY3QiLCJ2V2lkdGgiLCJpbm5lcldpZHRoIiwidkhlaWdodCIsImlubmVySGVpZ2h0IiwiaXNFbGVtZW50VmlzaWJsZSIsInBvc2l0aW9uIiwiZ2V0TWF4IiwiZ2V0SXRlbU1pbiIsImdldE1pbiIsImdldEl0ZW1NYXgiLCJjeWNsZSIsInNldEludGVydmFsIiwiY29udHJvbENsaWNrIiwicHJldmVudERlZmF1bHQiLCJjbGVhckludGVydmFsIiwiaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSIsInZpc2liaWxpdHlTdGF0ZSIsImluZGV4SXRlbSIsImdldEFjdGl2ZSIsImNoYW5nZWRUb3VjaGVzIiwiY2xpZW50WCIsImRlbHRhWCIsIm11bHRpSXRlbVNsaWRlciJdLCJtYXBwaW5ncyI6IkFBQUEsYUFHT0EsUUFBUUMsVUFBVUMsVUFDckJGLFFBQVFDLFVBQVVDLFFBQVUsU0FBU0MsR0FHbkMsSUFGQSxJQUFJQyxFQUFPQyxLQUVKRCxHQUFNLENBQ1gsR0FBSUEsRUFBS0UsUUFBUUgsR0FBTSxPQUFPQyxF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ZSxHQUFHQyxVQUUvQnRELEVBQVk3RyxpQkFBaUIsV0FBWSxTQUFTUyxHQUNoRCxJQUNJMkosRUFEUzNKLEVBQUV5SixlQUFlLEdBQUdDLFFBQ2IvQixFQUNSLEdBQVRnQyxFQUNEM0IsRUFBYyxRQUNOMkIsR0FBVSxJQUNsQjNCLEVBQWMsV0FNWSxZQUE3QjdKLFNBQVNtTCxpQkFDVk4sRUFBTTVCLEVBQVFFLFdBRWhCTSxJQXVCU2dDLENBQWdCLFVBQVciLCJmaWxlIjoiYWN0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuLy8gSUUgcG9saWZpbCAtLS0gLmNsb3Nlc3QoKVxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7XHJcbiAgICBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24oY3NzKSB7XHJcbiAgICAgIHZhciBub2RlID0gdGhpcztcclxuXHJcbiAgICAgIHdoaWxlIChub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUubWF0Y2hlcyhjc3MpKSByZXR1cm4gbm9kZTtcclxuICAgICAgICBlbHNlIG5vZGUgPSBub2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7XHJcblxyXG4vLyBJRSBwb2xpZmlsIC0tLSAubWF0Y2hlcygpXHJcbihmdW5jdGlvbigpIHtcclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0Y/QtdC8INC/0L7QtNC00LXRgNC20LrRg1xyXG4gIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xyXG5cclxuICAgIC8vINC+0L/RgNC10LTQtdC70Y/QtdC8INGB0LLQvtC50YHRgtCy0L5cclxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHxcclxuICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvcjtcclxuXHJcbiAgfVxyXG5cclxufSkoKTtcclxuLy8gZm9yRWFjaCBwb2xpZmlsXHJcbmlmICgnTm9kZUxpc3QnIGluIHdpbmRvdyAmJiAhTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICBjb25zb2xlLmluZm8oJ3BvbHlmaWxsIGZvciBJRTExJyk7XHJcbiAgTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgIHRoaXNBcmcgPSB0aGlzQXJnIHx8IHdpbmRvdztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIHJlbW92ZSgpIHBvbHlmaWxsXHJcbmlmKCFFbGVtZW50LnByb3RvdHlwZS5yZW1vdmUpIHtcclxuICBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKHRoaXMucGFyZW50Tm9kZSkge1xyXG4gICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcylcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgbGV0IHdpbmRvd1dpZHRoID0gc2NyZWVuLndpZHRoO1xyXG4gIFxyXG4gIGlmKHdpbmRvd1dpZHRoID49IDEyMDApIHtcclxuICAgIGNlbnRlcmVkKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xyXG4gIH1cclxuICBpZih3aW5kb3dXaWR0aCA+PSA5MDApIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3AtdXAtY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgncG9wLXVwLWhpZGRlbicpXHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvd1dpZHRoID0gc2NyZWVuLndpZHRoO1xyXG4gICAgaWYod2luZG93V2lkdGggPj0gMTIwMCkge1xyXG4gICAgICBoaWdodExpZ2h0KGdldENvb3Jkc09uUGFnZShzZWN0aW9ucykpO1xyXG4gICAgfVxyXG4gIH0pXHJcbiAgLy8gQnVyZ2VyIG1lbnVcclxuICBsZXQgbWVudVRvZ2dsZSAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1tZW51JyksXHJcbiAgICAgIG1lbnUgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW1lbnUnKSxcclxuICAgICAgbWVudUxpbmtzICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtbGluaycpLFxyXG4gICAgICBjdXJyZW50TWVudUxpbmsgPSBudWxsLFxyXG4gICAgICBwcmV2TWVudUxpbmsgICAgPSBudWxsO1xyXG5cclxuICAvLyBDbGljayBldmVudHNcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgIGlmKHRhcmdldC5jbG9zZXN0KCcuYnVyZ2VyLW1lbnUnKSkge1xyXG4gICAgICAvLyDQmtC70LjQuiDQv9C+INC80LXQvdGOXHJcbiAgICAgIHNob3dIaWRlTWVudSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2UgaWYodGFyZ2V0LmNsb3Nlc3QoJy5tYWluLW1lbnUnKSA9PT0gbnVsbCAmJiAhbWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtaGlkZScpKSB7XHJcbiAgICAgIC8vINCa0LvQuNC6INCy0L3QtSDQvNC10L3RjlxyXG4gICAgICBzaG93SGlkZU1lbnUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtbGluaycpKXtcclxuICAgICAgc2V0VGltZW91dChzaG93SGlkZU1lbnUsIDUwMCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyDQodC60YDRi9Cy0LDQtdGCINC4INC/0L7QutCw0LfRi9Cy0LDQtdGCIHBvcC11cFxyXG4gICAgaWYodGFyZ2V0LmNsb3Nlc3QoJy5wb3AtdXAtdG9nZ2xlJykpIHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcC11cC1jb250YWluZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdwb3AtdXAtaGlkZGVuJyk7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG4gICAgLy8g0JrQu9C40Log0LLQvdGD0YLRgNC4INGE0L7RgNC80YtcclxuICAgIGRvY3VtZW50LmZvcm1zLmZlZWRiYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmKGV2ZW50LnRhcmdldC50eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgbGV0IGxhYmVsID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuXHJcblxyXG4gIGxldCBjdXJyZW50VGFiID0gbnVsbDtcclxuXHJcbiAgICBtYXJrVGFiKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKVswXSk7IC8vTWFya2VkIHRhYiB3aGVuIHdpbmRvdy5vbmxvYWRcclxuXHJcbi8vSG92ZXIgZXZlbnRzXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZSkge1xyXG4gICAgaWYod2luZG93V2lkdGggPD0gMTIwMCkgcmV0dXJuO1xyXG5cclxuICAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICBcclxuICAgIGlmKHRhcmdldC5jbG9zZXN0KCcudGFiJykpIHtcclxuICAgICAgbGV0IHRhYiA9IHRhcmdldDtcclxuICAgICAgaWYodGFiLmNsYXNzTGlzdC5jb250YWlucygndGFiJykpIHtcclxuICAgICAgICBtYXJrVGFiKHRhYik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2hpbGUoIXRhYi5jbGFzc0xpc3QuY29udGFpbnMoJ3RhYicpKSB7XHJcbiAgICAgICAgICB0YWIgPSB0YWIucGFyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWFya1RhYih0YWIpO1xyXG4gICAgICB9XHJcbiAgICB9ICAgICAgXHJcbiAgfSk7XHJcblxyXG4gIGxldCBwYW5lbEl0ZW1zICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYW5lbC1saW5rJyksLy9TdWxraSB6IC5uYXYtcGFuZWxcclxuICAgICAgc2VjdGlvbnMgICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2l0ZS1zZWN0aW9uJyksXHJcbiAgICAgIGN1cnJlbnRQYW5lbEl0ZW0gID0gbnVsbCxcclxuICAgICAgcHJldlBhbmVsSXRlbSAgICAgPSBudWxsO1xyXG4gIFxyXG4gICAgaGlnaHRMaWdodChnZXRDb29yZHNPblBhZ2Uoc2VjdGlvbnMpKTsvL1doZW4gd2luZG93Lm9ubG9hZFxyXG5cclxuICAvLyBTY3JvbGwgZXZlbnRcclxuICBsZXQgYnRuRml4ZWQgICAgICAgICAgICA9IGZhbHNlLFxyXG4gICAgICBob21lSGVpZ2h0ICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWUtc2VjdGlvbicpLm9mZnNldEhlaWdodCxcclxuICAgICAgZmVlZGJhY2tUb3AgICAgICAgICA9IE1hdGgucm91bmQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWRiYWNrLXNlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgLy8g0KHQvtC30LTQsNC90LjQtSDQutC90L7Qv9C60Lgg0LIg0YbQtdC90YLRgNC1XHJcbiAgICBsZXQgc2Nyb2xsVG9wICAgICAgICAgICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsXHJcbiAgICAgICAgZmVlZGJhY2tUb3AgICAgICAgICA9IE1hdGgucm91bmQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWRiYWNrLXNlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKTtcclxuICAgIFxyXG4gICAgaWYoIWJ0bkZpeGVkICYmIHNjcm9sbFRvcCA+PSBob21lSGVpZ2h0IC0gMTApIHtcclxuICAgICAgbGV0IGEgICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgIGEuaHJlZiAgICAgID0gJyNoaXJlLXVzJztcclxuICAgICAgYS5pbm5lckhUTUwgPSAnSGlyZSB1cyc7XHJcbiAgICAgIGEuY2xhc3NMaXN0LmFkZCgnYnRuLWZpeGVkJyk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcblxyXG4gICAgICBidG5GaXhlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZihidG5GaXhlZCAmJiBmZWVkYmFja1RvcCA8PSBzY3JlZW4uaGVpZ2h0IC8gMikge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLWZpeGVkJykucmVtb3ZlKCk7XHJcbiAgICAgIGJ0bkZpeGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZihidG5GaXhlZCAmJiBzY3JvbGxUb3AgKyAxMCA8PSBob21lSGVpZ2h0KSB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tZml4ZWQnKS5yZW1vdmUoKTtcclxuICAgICAgYnRuRml4ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBoaWdodExpZ2h0KGdldENvb3Jkc09uUGFnZShzZWN0aW9ucykpO1xyXG5cclxuXHJcbiAgICAvLyBzaG93IHBvcFVwIGJsb2NrIGluIG1hcFxyXG4gICAgaWYoc2NyZWVuLndpZHRoID49IDkwMCkge1xyXG4gICAgICBsZXQgcG9wVXAgICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3AtdXAtY29udGFpbmVyJyksXHJcbiAgICAgICAgICBtYXBUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICBcclxuICAgICAgaWYobWFwVG9wIDw9IDUwICYmIHBvcFVwLmNsYXNzTGlzdC5jb250YWlucygncG9wLXVwLWhpZGRlbicpKSB7XHJcbiAgICAgICAgcG9wVXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wLXVwLWhpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKG1hcFRvcCA8IDAgJiYgIXBvcFVwLmNsYXNzTGlzdC5jb250YWlucygncG9wLXVwLWhpZGRlbicpKSB7XHJcbiAgICAgICAgcG9wVXAuY2xhc3NMaXN0LmFkZCgncG9wLXVwLWhpZGRlbicpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBjZW50ZXJlZCh2aWV3SGVpZ2h0KSB7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpdGUtc2VjdGlvbicpLmZvckVhY2goZnVuY3Rpb24oc2VjdGlvbiwgaW5kZXgpIHtcclxuICAgICAgbGV0IHNlY3Rpb25IZWlnaHQgPSBNYXRoLnJvdW5kKHNlY3Rpb24ub2Zmc2V0SGVpZ2h0KTtcclxuICAgICAgY29uc29sZS5sb2coc2VjdGlvbkhlaWdodCwgc2VjdGlvbi5pZClcclxuICAgICAgaWYoc2VjdGlvbkhlaWdodCA8PSB2aWV3SGVpZ2h0ICYmIHNlY3Rpb24uaWQgIT09ICdjb250YWN0Jykge1xyXG4gICAgICAgIGxldCBkaWZmID0gdmlld0hlaWdodCAtIHNlY3Rpb25IZWlnaHQ7XHJcbiAgICAgICAgc2VjdGlvbi5zdHlsZS5wYWRkaW5nVG9wICAgID0gYCR7ZGlmZiAvIDJ9cHhgO1xyXG4gICAgICAgIHNlY3Rpb24uc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke2RpZmYgLyAyfXB4YDtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gaGlnaHRMaWdodChjb29yZHMpIHtcclxuICAgIGlmKHdpbmRvd1dpZHRoIDwgMTIwMCkgcmV0dXJuO1xyXG4gICAgLy8gUHJ1IHNjcm9sbGkgcGlkc3ZpY2h1ZSB2IG5hdlBhbmVsIHBvenVjaXl1IHRhIG5vbWVyIHNlY3Rpb25cclxuICAgIGxldCB3aW5kb3dIZWlnaHQgICAgICAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgIGN1cnJlbnRTY3JvbGwgICAgICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsXHJcbiAgICAgICAgY2hhbmdpbmdCb3JkZXIgICAgID0gY3VycmVudFNjcm9sbCArIHdpbmRvd0hlaWdodC8yOyAvL0xpbml5YSBwcnUgcGVyZXRlbmkgeWFrb2kgem1pbnl1ZXRzeWEgY3VycmVudFBhbmVsSXRlbVxyXG4gICAgY29vcmRzLmZvckVhY2goZnVuY3Rpb24oc2VjdGlvbiwgaSkge1xyXG4gICAgICAgIGlmKGNoYW5naW5nQm9yZGVyID49IHNlY3Rpb24udG9wICYmIGNoYW5naW5nQm9yZGVyIDw9IHNlY3Rpb24uYm90dG9tKSB7XHJcbiAgICAgICAgICAvL0xpbml5YSBwZXJldHVueSBtaXpoIHNlY3Rpb24udG9wIGkgc2VjdGlvbi5ib3R0b21cclxuICAgICAgICAgIGN1cnJlbnRQYW5lbEl0ZW0gPSBwYW5lbEl0ZW1zW2ldO1xyXG4gICAgICAgICAgY3VycmVudE1lbnVMaW5rICA9IG1lbnVMaW5rc1tpXTtcclxuICAgICAgICAgIGlmKHByZXZQYW5lbEl0ZW0gIT09IG51bGwgJiYgcHJldlBhbmVsSXRlbSAhPT0gY3VycmVudFBhbmVsSXRlbSkge1xyXG4gICAgICAgICAgICAvL0RlbGV0ZSBjbGFzcyB5IHByZXYgbmF2SXRlbSBhbmQgbWVudUxpbmtcclxuICAgICAgICAgICAgcHJldlBhbmVsSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdsaW5rLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBwcmV2TWVudUxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnbGluay1hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKGN1cnJlbnRQYW5lbEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdsaW5rLWFjdGl2ZScpKSByZXR1cm47XHJcbiAgICAgICAgICBjdXJyZW50UGFuZWxJdGVtLmNsYXNzTGlzdC5hZGQoJ2xpbmstYWN0aXZlJyk7XHJcbiAgICAgICAgICBjdXJyZW50TWVudUxpbmsuY2xhc3NMaXN0LmFkZCgnbGluay1hY3RpdmUnKTtcclxuICAgICAgICAgIHByZXZQYW5lbEl0ZW0gPSBjdXJyZW50UGFuZWxJdGVtO1xyXG4gICAgICAgICAgcHJldk1lbnVMaW5rID0gY3VycmVudE1lbnVMaW5rO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG1hcmtUYWIodGFiKSB7XHJcbiAgICBpZih3aW5kb3dXaWR0aCA8IDEyMDApIHJldHVybjtcclxuICAgIC8vIFBydSBob3ZlcmkgY3Vyc29yb20gbmEgdGFiIHBlcmVtaXNjaGFlIHBvdnp5bm9rIG5hIHBvdHJpYm51eSB0YWJcclxuICAgIGlmKGN1cnJlbnRUYWIgIT09IG51bGwgJiYgY3VycmVudFRhYiAhPT0gdGFiKSB7XHJcbiAgICAgIC8vINCj0LTQsNC70Y/RlCDQutC70LDRgdGBINGDINC/0L7Qv9C10YDQtdC00L3RjNC+0LPQviDQtdC70LXQvNC10L3RgtCwXHJcbiAgICAgIC8vINCf0YDQuCDQv9C10YDRiNC+0LzRgyDQstC40LfQvtCy0ZYg0YTRg9C90LrRhtGW0Zcg0L/RgNC+0L/Rg9GB0LrQsNC1INGD0YHQu9C+0LLRltC1IFxyXG4gICAgICBjdXJyZW50VGFiLmNsYXNzTGlzdC5yZW1vdmUoJ3RhYi1hY3RpdmUnKTtcclxuICAgIH1cclxuICAgIGN1cnJlbnRUYWIgICAgICAgICAgICAgICAgICAgICAgPSB0YWI7XHJcbiAgICBsZXQgdGFiUGFyZW50QmxvY2tMZWZ0Q29vcmQgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWUtdGFicycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCxcclxuICAgICAgICBjdXJyZW50VGFiTGVmdENvb3JkICAgICAgICAgPSBjdXJyZW50VGFiLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQsXHJcbiAgICAgICAgdGFiVG9nZ2xlICAgICAgICAgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYnMtdG9nZ2xlJyk7XHJcbiAgICB0YWJUb2dnbGUuc3R5bGUubGVmdCA9IGAke2N1cnJlbnRUYWJMZWZ0Q29vcmQgLSB0YWJQYXJlbnRCbG9ja0xlZnRDb29yZH1weGA7XHJcbiAgICBjdXJyZW50VGFiLmNsYXNzTGlzdC5hZGQoJ3RhYi1hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dIaWRlTWVudSgpIHtcclxuICAgIG1lbnVUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnanMtYWN0aXZlJyk7XHJcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtaGlkZScpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBnZXRDb29yZHNPblBhZ2UoZWxlbWVudHMpIHtcclxuICAgIGxldCBhcnIgICAgICAgICAgID0gW10sXHJcbiAgICAgICAgY3VycmVudFNjcm9sbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICBsZXQgYyA9IHNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICBhcnIucHVzaCh7XHJcbiAgICAgICAgaWQ6IHNlY3Rpb24uaWQsXHJcbiAgICAgICAgdG9wOiBjLnRvcCArIGN1cnJlbnRTY3JvbGwsXHJcbiAgICAgICAgcmlnaHQ6IGMucmlnaHQgKyBjdXJyZW50U2Nyb2xsLFxyXG4gICAgICAgIGJvdHRvbTogYy5ib3R0b20gKyBjdXJyZW50U2Nyb2xsLFxyXG4gICAgICAgIGxlZnQ6IGMubGVmdCArIGN1cnJlbnRTY3JvbGxcclxuICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcbi8vIGFsZXJ0KGBIZWlnaHQ6ICR7c2NyZWVuLmhlaWdodH0sIHdpZHRoOiAke3NjcmVlbi53aWR0aH1gKVxyXG59XHJcblxyXG5cclxud2luZG93LmluaXRNYXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgXHJcbiAgbGV0IGNvb3JkcyA9IHtsYXQ6IDQ5LjgyMDg3MCwgbG5nOiAyMy45ODUwMjJ9O1xyXG4gIGxldCBtYXJrZXJJY29uID0gJ3NyYy9pbWcvbWFwX21hcmtlci5wbmcnOy8v0J/Rg9GC0Ywg0L/RgNC+0L/QuNGB0YvQstCw0YLRjCDQvtGCIGluZGV4Lmh0bWxcclxuICBsZXQgc3R5bGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwic2F0dXJhdGlvblwiOiAzNlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzcwNzA3MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDQwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuc3Ryb2tlXCIsXHJcbiAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib25cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDE2XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLmljb25cIixcclxuICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmVcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnkuZmlsbFwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMjBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlXCIsXHJcbiAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LnN0cm9rZVwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMTdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJ3ZWlnaHRcIjogMS4yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJsYW5kc2NhcGVcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzQyNDI0MlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDIxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzXCIsXHJcbiAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib25cIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXHJcbiAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXHJcbiAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxyXG4gICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMTdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM0ODQ4NDhcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5XCIsXHJcbiAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LnN0cm9rZVwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDI5XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwid2VpZ2h0XCI6IDAuMlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmMDAwMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwidmlzaWJpbGl0eVwiOiBcIm9mZlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXHJcbiAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAxOFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLFxyXG4gICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMTZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInRyYW5zaXRcIixcclxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDE5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxyXG4gICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMTdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxuXTtcclxuICBsZXQgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksXHJcbiAge1xyXG4gICAgY2VudGVyOiBjb29yZHMsXHJcbiAgICB6b29tOiAxMixcclxuICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXHJcbiAgICBzdHlsZXM6IHN0eWxlc1xyXG4gIH0pO1xyXG5cclxuLyogIGxldCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgIGljb246IG1hcmtlckljb24sXHJcbiAgICBwb3NpdGlvbjogY29vcmRzLFxyXG4gICAgdGl0bGU6ICdIRWxsbycsXHJcbiAgICBtYXA6IG1hcFxyXG4gIH0pOyovXHJcblxyXG4gIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJwaW5cIj48L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGluLWVmZmVjdFwiPjwvZGl2PmA7XHJcbiAgbGV0IG92ZXJsYXk7XHJcblxyXG4gIE15T3ZlcmxheS5wcm90b3R5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcclxuICBsZXQgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNvb3JkcykpO1xyXG5cclxuICBvdmVybGF5ID0gbmV3IE15T3ZlcmxheShtYXAsIGNvb3JkcywgaHRtbCwgYm91bmRzKTtcclxuICBcclxuICBmdW5jdGlvbiBNeU92ZXJsYXkobWFwLCBjb29yZGluYXRlcywgaHRtbCwgYm91bmRzKSB7XHJcbiAgICB0aGlzLm1hcF8gICAgICAgICA9IG1hcDtcclxuICAgIHRoaXMuaHRtbF8gICAgICAgID0gaHRtbDtcclxuICAgIHRoaXMuY29vcmRpbmF0ZXNfID0gY29vcmRpbmF0ZXM7XHJcbiAgICB0aGlzLmJvdW5kc18gICAgICA9IGJvdW5kcztcclxuICAgIHRoaXMuZGl2XyA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zZXRNYXAobWFwKTtcclxuICB9XHJcblxyXG4gIFxyXG4gIE15T3ZlcmxheS5wcm90b3R5cGUub25BZGQgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdtYXJrZXInKTtcclxuICAgIGRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuICAgIHRoaXMuZGl2XyA9IGRpdjtcclxuICAgIFxyXG4gICAgbGV0IHBhbmVzID0gdGhpcy5nZXRQYW5lcygpO1xyXG4gICAgcGFuZXMub3ZlcmxheU1vdXNlVGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZGl2XylcclxuICAgIFxyXG4gICAgbGV0IG1hcE92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1hcE92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnbWFwLW92ZXJsYXknKTtcclxuXHJcbiAgICBwYW5lcy5vdmVybGF5U2hhZG93LmFwcGVuZENoaWxkKG1hcE92ZXJsYXkpXHJcblxyXG4gIH1cclxuICBNeU92ZXJsYXkucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgICBsZXQgc3cgPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRoaXMuYm91bmRzXy5nZXRTb3V0aFdlc3QoKSk7XHJcbiAgICBsZXQgbmUgPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRoaXMuYm91bmRzXy5nZXROb3J0aEVhc3QoKSk7XHJcbiBcclxuICAgIGxldCBkaXYgPSB0aGlzLmRpdl87XHJcbiAgICBkaXYuc3R5bGUubGVmdCA9IHN3LnggKyAncHgnO1xyXG4gICAgZGl2LnN0eWxlLnRvcCA9IG5lLnkgKyAncHgnO1xyXG5cclxuICB9XHJcblxyXG4gIG1hcC5hZGRMaXN0ZW5lcignem9vbV9jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgem9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xyXG5cclxuICAgIGlmKHpvb20gPD0gMTYgJiYgdGhpcy5nZXRNYXBUeXBlSWQoKSA9PT0gJ2h5YnJpZCcpIHtcclxuICAgICAgdGhpcy5zZXRNYXBUeXBlSWQoJ3JvYWRtYXAnKTtcclxuICAgIH1cclxuICAgIGlmKHpvb20gPj0gMTYpIHtcclxuICAgICAgdGhpcy5zZXRNYXBUeXBlSWQoJ2h5YnJpZCcpO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbn0vL0VuZCBtYXBJbml0XHJcblxyXG4vLyBpbml0TWFwKCk7XHJcblxyXG4iLCJsZXQgbXVsdGlJdGVtU2xpZGVyID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICBmdW5jdGlvbiBpc0VsZW1lbnRWaXNpYmxlKGVsZW1lbnQpIHtcclxuICAgIGxldCByZWN0ICAgICAgICAgICAgICAgID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICB2V2lkdGggICAgICAgICAgICAgID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICAgIHZIZWlnaHQgICAgICAgICAgICAgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICBlbGVtRnJvbVBvaW50ICAgICAgID0gZnVuY3Rpb24oeCwgeSkge3JldHVybiBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHgsIHkpfTtcclxuICBcclxuICAgICAgICBpZihyZWN0LnJpZ2h0IDwgMCB8fCByZWN0LmJvdHRvbSA8IDAgfHwgcmVjdC5sZWZ0ID4gdldpZHRoIHx8IHJlY3QudG9wID4gdkhlaWdodCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gKCBcclxuICAgICAgICAgIGVsZW1lbnQuY29udGFpbnMoZWxlbUZyb21Qb2ludChyZWN0LmxlZnQsIHJlY3QudG9wKSlcclxuICAgICAgICAgIHx8IGVsZW1lbnQuY29udGFpbnMoZWxlbUZyb21Qb2ludChyZWN0LnJpZ2h0LCByZWN0LnRvcCkpXHJcbiAgICAgICAgICB8fCBlbGVtZW50LmNvbnRhaW5zKGVsZW1Gcm9tUG9pbnQocmVjdC5yaWdodCwgcmVjdC5ib3R0b20pKVxyXG4gICAgICAgICAgfHwgZWxlbWVudC5jb250YWlucyhlbGVtRnJvbVBvaW50KHJlY3QubGVmdCwgcmVjdC5ib3R0b20pKVxyXG4gICAgICAgICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yLCBjb25maWcpIHtcclxuICAgIGxldCBtYWluRWxlbWVudCAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvciksIC8vINC+0YHQvdC+0LLQvdGL0Lkg0Y3Qu9C10LzQtdC90YIg0LHQu9C+0LrQsFxyXG4gICAgICAgIHNsaWRlcldyYXBwZXIgICAgICAgPSBtYWluRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKSwgLy8g0L7QsdC10YDRgtC60LAg0LTQu9GPIC5zbGlkZXItaXRlbVxyXG4gICAgICAgIHNsaWRlckl0ZW1zICAgICAgICAgPSBtYWluRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWl0ZW0nKSwgLy8g0Y3Qu9C10LzQtdC90YLRiyAoLnNsaWRlci1pdGVtKVxyXG4gICAgICAgIHNsaWRlckNvbnRyb2xzICAgICAgPSBtYWluRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWNvbnRyb2wnKSwvLyDRjdC70LXQvNC10L3RgtGLINGD0L/RgNCw0LLQu9C10L3QuNGPXHJcbiAgICAgICAgc2xpZGVyQ29udHJvbExlZnQgICA9IG1haW5FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItY29udHJvbC1sZWZ0JyksLy8g0LrQvdC+0L/QutCwIFwiTEVGVFwiXHJcbiAgICAgICAgc2xpZGVyQ29udHJvbFJpZ2h0ICA9IG1haW5FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItY29udHJvbC1yaWdodCcpLC8vINC60L3QvtC/0LrQsCBcIlJJR0hUXCJcclxuICAgICAgICB3cmFwcGVyV2lkdGggICAgICAgID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHNsaWRlcldyYXBwZXIpLndpZHRoKSwvLyDRiNC40YDQuNC90LAg0L7QsdGR0YDRgtC60LhcclxuICAgICAgICBpdGVtV2lkdGggICAgICAgICAgID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHNsaWRlckl0ZW1zWzBdKS53aWR0aCksLy8g0YjQuNGA0LjQvdCwINC+0LTQvdC+0LPQviDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgcG9zaXRpb25MZWZ0SXRlbSAgICA9IDAsLy8g0L/QvtC30LjRhtC40Y8g0LvQtdCy0L7Qs9C+INCw0LrRgtC40LLQvdC+0LPQviDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgdHJhbnNmb3JtICAgICAgICAgICA9IDAsLy8g0LfQvdCw0YfQtdC90LjQtSDRgtGA0LDQvdGB0YTQvtGA0LzQsNGG0LjQuCAuc2xpZGVyX3dyYXBwZXJcclxuICAgICAgICBzdGVwICAgICAgICAgICAgICAgID0gaXRlbVdpZHRoIC8gd3JhcHBlcldpZHRoICoxMDAsLy8g0LLQtdC70LjRh9C40L3QsCDRiNCw0LPQsCAo0LTQu9GPINGC0YDQsNC90YHRhNC+0YDQvNCw0YbQuNC4KVxyXG4gICAgICAgIGl0ZW1zICAgICAgICAgICAgICAgPSBbXSwvLyDQvNCw0YHRgdC40LIg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgICAgICAgaW50ZXJ2YWwgICAgICAgICAgICA9IDAsXHJcbiAgICAgICAgaHRtbCAgICAgICAgICAgICAgICA9IG1haW5FbGVtZW50LmlubmVySFRNTCxcclxuICAgICAgICBzdGF0ZXMgICAgICAgICAgICAgID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmU6IGZhbHNlLCBtaW5XaWR0aDogMCwgY291bnQ6IDF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmU6IGZhbHNlLCBtaW5XaWR0aDogOTgwLCBjb3VudDogMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICBfY29uZmlnICAgICAgICAgICAgID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3ljbGluZzogZmFsc2UsIC8vINCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutCw0Y8g0YHQvNC10L3QsCDRgdC70LDQudC00L7QslxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3JpZ2h0JywgLy8g0L3QsNC/0YDQsNCy0LvQtdC90LjQtSDRgdC80LXQvdGLINGB0LvQsNC50LTQvtCyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDMwMDAsIC8vINC40L3RgtC10YDQstCw0Lsg0LzQtdC20LTRgyDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQvtC5INGB0LzQtdC90L7QuSDRgdC70LDQudC00L7QslxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdXNlOiB0cnVlIC8vINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDRgtGMINC70Lgg0L/QsNGD0LfRgyDQv9GA0Lgg0L/QvtC00L3QtdGB0LXQvdC40Lgg0LrRg9GA0YHQvtGA0LAg0Log0YHQu9Cw0LnQtNC10YDRg1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgIHZpc2libGVJdGVtcyAgICAgICAgPSBNYXRoLnJvdW5kKHdyYXBwZXJXaWR0aCAvIGl0ZW1XaWR0aCksXHJcbiAgICAgICAgaW5kZXhTY2FsZWRJdGVtICAgICA9IG51bGw7XHJcblxyXG4gICAgZm9yKGxldCBrZXkgaW4gY29uZmlnKSB7XHJcbiAgICAgIGlmKGtleSBpbiBfY29uZmlnKSB7XHJcbiAgICAgICAgX2NvbmZpZ1trZXldID0gY29uZmlnW2tleV1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHN0YXJ0WCA9IDA7XHJcbiAgICAvLyDQvdCw0L/QvtC70L3QtdC90LjQtSDQvNCw0YHRgdC40LLQsCBpdGVtc1xyXG4gICAgc2xpZGVySXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICBpdGVtcy5wdXNoKHtpdGVtOiBpdGVtLCBwb3NpdGlvbjogaW5kZXgsIHRyYW5zZm9ybTogMH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgXHJcblxyXG4gICAgaWYodmlzaWJsZUl0ZW1zID09PSAzKSB7XHJcbiAgICAgIGluZGV4U2NhbGVkSXRlbSA9IDE7XHJcbiAgICAgIGl0ZW1zW2luZGV4U2NhbGVkSXRlbV0uaXRlbS5jbGFzc0xpc3QuYWRkKCdpdGVtLXNjYWxlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpbmRleFNjYWxlZEl0ZW0gPSAwO1xyXG4gICAgICBpdGVtc1tpbmRleFNjYWxlZEl0ZW1dLml0ZW0uY2xhc3NMaXN0LmFkZCgnaXRlbS1zY2FsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZXRBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBsZXQgX2luZGV4ID0gMDtcclxuICAgICAgICAgIGxldCB3aWR0aCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCk7XHJcbiAgICAgICAgICBzdGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgsIGFycikge1xyXG4gICAgICAgICAgICBzdGF0ZXNbaW5kZXhdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAod2lkdGggPj0gc3RhdGVzW2luZGV4XS5taW5XaWR0aClcclxuICAgICAgICAgICAgICBfaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgc3RhdGVzW19pbmRleF0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBnZXRBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBsZXQgX2luZGV4O1xyXG4gICAgICAgICAgc3RhdGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBhcnIpIHtcclxuICAgICAgICAgICAgaWYoc3RhdGVzW2luZGV4XS5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICBfaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gX2luZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBsZXQgcG9zaXRpb24gPSB7XHJcbiAgICAgIGdldEl0ZW1NaW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBpbmRleEl0ZW0gPSAwO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmKGl0ZW0ucG9zaXRpb24gPCBpdGVtc1tpbmRleEl0ZW1dLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGluZGV4SXRlbSA9IGluZGV4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBpbmRleEl0ZW07XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRJdGVtTWF4OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgaW5kZXhJdGVtID0gMDtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICBpZihpdGVtLnBvc2l0aW9uID4gaXRlbXNbaW5kZXhJdGVtXS5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpbmRleEl0ZW0gPSBpbmRleDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaW5kZXhJdGVtO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0TWluOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gaXRlbXNbcG9zaXRpb24uZ2V0SXRlbU1pbigpXS5wb3NpdGlvbjtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldE1heDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zW3Bvc2l0aW9uLmdldEl0ZW1NYXgoKV0ucG9zaXRpb247XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGV0IHRyYW5zZm9ybUl0ZW0gPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgICAgbGV0IG5leHRJdGVtO1xyXG4gICAgICBpZighaXNFbGVtZW50VmlzaWJsZShtYWluRWxlbWVudCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIHBvc2l0aW9uTGVmdEl0ZW0rKztcclxuICAgICAgICBpZigocG9zaXRpb25MZWZ0SXRlbSArIHdyYXBwZXJXaWR0aC9pdGVtV2lkdGgtMSkgPj0gcG9zaXRpb24uZ2V0TWF4KCkpIHtcclxuICAgICAgICAgIG5leHRJdGVtID0gcG9zaXRpb24uZ2V0SXRlbU1pbigpO1xyXG4gICAgICAgICAgaXRlbXNbbmV4dEl0ZW1dLnBvc2l0aW9uID0gcG9zaXRpb24uZ2V0TWF4KCkgKyAxO1xyXG4gICAgICAgICAgaXRlbXNbbmV4dEl0ZW1dLnRyYW5zZm9ybSArPSBpdGVtcy5sZW5ndGggKiAxMDA7XHJcbiAgICAgICAgICBpdGVtc1tuZXh0SXRlbV0uaXRlbS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2l0ZW1zW25leHRJdGVtXS50cmFuc2Zvcm19JSlgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZihpbmRleFNjYWxlZEl0ZW0gPT09IGl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIGl0ZW1zW2luZGV4U2NhbGVkSXRlbV0uaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpdGVtLXNjYWxlJyk7XHJcbiAgICAgICAgICBpbmRleFNjYWxlZEl0ZW0gPSAwO1xyXG4gICAgICAgICAgaXRlbXNbaW5kZXhTY2FsZWRJdGVtXS5pdGVtLmNsYXNzTGlzdC5hZGQoJ2l0ZW0tc2NhbGUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXRlbXNbaW5kZXhTY2FsZWRJdGVtXS5pdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2l0ZW0tc2NhbGUnKVxyXG4gICAgICAgICAgaW5kZXhTY2FsZWRJdGVtKys7XHJcbiAgICAgICAgICBpdGVtc1tpbmRleFNjYWxlZEl0ZW1dLml0ZW0uY2xhc3NMaXN0LmFkZCgnaXRlbS1zY2FsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cmFuc2Zvcm0gLT0gc3RlcDtcclxuICAgICAgfVxyXG4gICAgICBpZihkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgIHBvc2l0aW9uTGVmdEl0ZW0tLTtcclxuICAgICAgICBpZihwb3NpdGlvbkxlZnRJdGVtIDw9IHBvc2l0aW9uLmdldE1pbigpKSB7XHJcbiAgICAgICAgICBuZXh0SXRlbSA9IHBvc2l0aW9uLmdldEl0ZW1NYXgoKTtcclxuICAgICAgICAgIGl0ZW1zW25leHRJdGVtXS5wb3NpdGlvbiA9IHBvc2l0aW9uLmdldE1pbigpIC0xO1xyXG4gICAgICAgICAgaXRlbXNbbmV4dEl0ZW1dLnRyYW5zZm9ybSAtPSBpdGVtcy5sZW5ndGggKiAxMDA7XHJcbiAgICAgICAgICBpdGVtc1tuZXh0SXRlbV0uaXRlbS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2l0ZW1zW25leHRJdGVtXS50cmFuc2Zvcm19JSlgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmRleFNjYWxlZEl0ZW0gPT09IDApIHtcclxuICAgICAgICAgIGl0ZW1zW2luZGV4U2NhbGVkSXRlbV0uaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpdGVtLXNjYWxlJyk7XHJcbiAgICAgICAgICBpbmRleFNjYWxlZEl0ZW0gPSBpdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgaXRlbXNbaW5kZXhTY2FsZWRJdGVtXS5pdGVtLmNsYXNzTGlzdC5hZGQoJ2l0ZW0tc2NhbGUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXRlbXNbaW5kZXhTY2FsZWRJdGVtXS5pdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2l0ZW0tc2NhbGUnKVxyXG4gICAgICAgICAgaW5kZXhTY2FsZWRJdGVtLS07XHJcbiAgICAgICAgICBpdGVtc1tpbmRleFNjYWxlZEl0ZW1dLml0ZW0uY2xhc3NMaXN0LmFkZCgnaXRlbS1zY2FsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cmFuc2Zvcm0gKz0gc3RlcDtcclxuICAgICAgfVxyXG4gICAgICBzbGlkZXJXcmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcgKyB0cmFuc2Zvcm0gKyAnJSknO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjeWNsZSA9IGZ1bmN0aW9uKGRpcmVjdGlvbikge1xyXG4gICAgICBpZighX2NvbmZpZy5pc0N5Y2xpbmcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICB0cmFuc2Zvcm1JdGVtKGRpcmVjdGlvbik7XHJcbiAgICAgIH0sIF9jb25maWcuaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG4gICAgLy/QntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBvbmNsaWtcclxuICAgIGxldCBjb250cm9sQ2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWNvbnRyb2wnKSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGxldCBkaXJlY3Rpb24gPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlci1jb250cm9sLXJpZ2h0JykgPyAncmlnaHQnIDogJ2xlZnQnO1xyXG4gICAgICB0cmFuc2Zvcm1JdGVtKGRpcmVjdGlvbik7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICBjeWNsZShfY29uZmlnLmRpcmVjdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8g0L7QsdGA0LDQsdC+0YLQutCwINGB0L7QsdGL0YLQuNGPINC40LfQvNC10L3QtdC90LjRjyDQstC40LTQuNC80L7RgdGC0Lgg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgdmFyIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICBjeWNsZShfY29uZmlnLmRpcmVjdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgbWFpbkVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICAgIHNsaWRlcldyYXBwZXIgPSBtYWluRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKTtcclxuICAgICAgICAgIHNsaWRlckl0ZW1zID0gbWFpbkVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1pdGVtJyk7XHJcbiAgICAgICAgICBzbGlkZXJDb250cm9scyA9IG1haW5FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItY29udHJvbCcpO1xyXG4gICAgICAgICAgc2xpZGVyQ29udHJvbExlZnQgPSBtYWluRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvbnRyb2wtbGVmdCcpO1xyXG4gICAgICAgICAgc2xpZGVyQ29udHJvbFJpZ2h0ID0gbWFpbkVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlci1jb250cm9sLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB3cmFwcGVyV2lkdGggPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoc2xpZGVyV3JhcHBlcikud2lkdGgpO1xyXG4gICAgICAgICAgaXRlbVdpZHRoID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHNsaWRlckl0ZW1zWzBdKS53aWR0aCk7XHJcbiAgICAgICAgICBwb3NpdGlvbkxlZnRJdGVtID0gMDtcclxuICAgICAgICAgIHRyYW5zZm9ybSA9IDA7XHJcbiAgICAgICAgICBzdGVwID0gaXRlbVdpZHRoIC8gd3JhcHBlcldpZHRoICogMTAwO1xyXG4gICAgICAgICAgaXRlbXMgPSBbXTtcclxuICAgICAgICAgIHZpc2libGVJdGVtcyA9IE1hdGgucm91bmQod3JhcHBlcldpZHRoIC8gaXRlbVdpZHRoKTtcclxuICAgICAgICAgIHNsaWRlckl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goeyBpdGVtOiBpdGVtLCBwb3NpdGlvbjogaW5kZXgsIHRyYW5zZm9ybTogMCB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBsZXQgc2V0VXBMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgbWFpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sQ2xpY2spO1xyXG4gICAgICBpZihfY29uZmlnLnBhdXNlICYmIF9jb25maWcuaXNDeWNsaW5nKSB7XHJcbiAgICAgICAgbWFpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICBjeWNsZShfY29uZmlnLmRpcmVjdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UsIGZhbHNlKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBfaW5kZXggPSAwLFxyXG4gICAgICAgICAgICB3aWR0aCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCk7XHJcbiAgICAgICAgc3RhdGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycikge1xyXG4gICAgICAgICAgaWYod2lkdGggPj0gc3RhdGVzW2luZGV4XS5taW5XaWR0aClcclxuICAgICAgICAgICAgX2luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoX2luZGV4ICE9PSBnZXRBY3RpdmUoKSkge1xyXG4gICAgICAgICAgc2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICByZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG1haW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgc3RhcnRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICB9KTtcclxuICAgICAgbWFpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgbGV0IGVuZFggICA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxcclxuICAgICAgICAgICAgZGVsdGFYID0gZW5kWCAtIHN0YXJ0WDtcclxuICAgICAgICBpZihkZWx0YVggPiA1MCkge1xyXG4gICAgICAgICAgdHJhbnNmb3JtSXRlbSgnbGVmdCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZihkZWx0YVggPCAtNTApIHtcclxuICAgICAgICAgIHRyYW5zZm9ybUl0ZW0oJ3JpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICBzZXRVcExpc3RlbmVycygpO1xyXG4gICAgaWYoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcclxuICAgICAgY3ljbGUoX2NvbmZpZy5kaXJlY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgc2V0QWN0aXZlKCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmlnaHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRyYW5zZm9ybUl0ZW0oJ3JpZ2h0Jyk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRyYW5zZm9ybUl0ZW0oJ2xlZnQnKTtcclxuICAgICAgfSxcclxuICAgICAgc3RvcDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX2NvbmZpZy5pc0N5Y2xpbmcgPSBmYWxzZTtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgfSxcclxuICAgICAgY3ljbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9jb25maWcuaXNDeWNsaW5nID0gdHJ1ZTtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICBjeWNsZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxufSkoKTtcclxuXHJcbmxldCBzbGlkZXIgPSBtdWx0aUl0ZW1TbGlkZXIoJy5zbGlkZXInLCB7XHJcbiAgLy8gaXNDeWNsaW5nOiB0cnVlXHJcbn0pO1xyXG4iXX0=
